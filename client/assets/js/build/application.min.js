var App;App=function(){"use strict";var a,b=function(){return{numComplete:0,container:{offsetX:0,offsetY:0},click:{offsetX:0,offsetY:0},draggables:[],draggable:null,draggableInitialX:0,draggableInitialY:0,droppables:[],droppable:null,dragging:!1,dropTarget:!1,startText:"Place the dots in their correct locations",endText:"CONGRATULATIONS!!!"}},c={initApp:function(){this.dragInfo=b(),this.dragInfo.containerOffsetX=document.querySelector(".drag-container").offsetLeft,this.dragInfo.containerOffsetY=document.querySelector(".drag-container").offsetTop,document.getElementById("alert-text").innerHTML=this.dragInfo.startText,document.getElementById("start-over").addEventListener("click",c.resetDraggables,!1),a=this.dragInfo},initDraggable:function(b){var d=document.querySelectorAll(b),e=0,f=0;for(a.draggables=[],e=d.length,f=0;f<d.length;f+=1)a.draggables.push({element:d[f],initialLeft:d[f].offsetLeft,initialTop:d[f].offsetTop}),d[f].ondragstart=function(){return!1},d[f].addEventListener("mousedown",c.beginDrag,!1)},initDroppable:function(b){var c=document.querySelectorAll(b),d=0,e=0;for(a.droppables=[],d=c.length,e=0;d>e;e+=1)a.droppables.push({element:c[e],top:c[e].offsetTop,right:c[e].offsetLeft+c[e].offsetWidth,bottom:c[e].offsetTop+c[e].offsetHeight,left:c[e].offsetLeft})},beginDrag:function(b){a.dragging=!0,a.draggable=b.target,a.draggableInitialX=b.target.offsetLeft,a.draggableInitialY=b.target.offsetTop,a.clickOffsetX=b.offsetX,a.clickOffsetY=b.offsetY,a.draggable.addEventListener("mousemove",c.continueDrag,!1),a.draggable.addEventListener("mouseup",c.endDrag,!1),b.preventDefault()},continueDrag:function(b){var d={};a.dragging&&(c.toggleDragStyles("on"),d.left=b.pageX-a.containerOffsetX-a.clickOffsetX,d.top=b.pageY-a.containerOffsetY-a.clickOffsetY,d.right=d.left+a.draggable.offsetWidth,d.bottom=d.top+a.draggable.offsetHeight,a.draggable.style.left=d.left+"px",a.draggable.style.top=d.top+"px",a.droppable=c.isDropArea(d),a.droppable&&null!==a.droppable?(a.dropTarget=c.isDropTarget(),a.droppable.classList.add(a.dropTarget?"hover-target-good":"hover-target-bad")):a.dropTarget=!1,a.draggable.addEventListener("mouseleave",c.endDrag,!1))},isDropArea:function(b){var c=0,d=0;for(c=a.droppables.length,d=0;c>d;d+=1){if((b.top>=a.droppables[d].top&&b.top<=a.droppables[d].bottom||b.bottom>=a.droppables[d].top&&b.bottom<=a.droppables[d].bottom)&&(b.left>=a.droppables[d].left&&b.left<=a.droppables[d].right||b.right>=a.droppables[d].left&&b.right<=a.droppables[d].right))return a.droppables[d].element;a.droppables[d].element.classList.remove("hover-target-good"),a.droppables[d].element.classList.remove("hover-target-bad")}return null},isDropTarget:function(){return a.draggable.dataset.dotColor===a.droppable.dataset.dotColor?!0:!1},toggleDragStyles:function(b){"on"===b?(a.draggable.style.opacity=.5,a.draggable.style.zIndex=1e3):(a.draggable.style.opacity=1,a.draggable.style.zIndex=10)},endDrag:function(){a.dropTarget?(c.snapDot(),c.incrementCount(),c.updateMessage(),a.draggable.removeEventListener("mousedown",c.beginDrag,!1)):c.resetDot(),c.toggleDragStyles("off"),c.resetDroppables(),a.draggable.removeEventListener("mousemove",c.continueDrag,!1),a.draggable.removeEventListener("mouseup",c.endDrag,!1),a.draggable.removeEventListener("mouseleave",c.endDrag,!1),a.dragging=!1,a.draggable=null},snapDot:function(){a.draggable.style.left=a.droppable.offsetLeft+"px",a.draggable.style.top=a.droppable.offsetTop+"px"},resetDot:function(){a.draggable.style.left=a.draggableInitialX+"px",a.draggable.style.top=a.draggableInitialY+"px"},incrementCount:function(){a.numComplete+=1,a.dropTarget=!1},updateMessage:function(){var b,c,d;b=document.getElementById("complete-count"),c=document.getElementById("alert-box"),d=document.getElementById("alert-text"),b.textContent=a.numComplete.toString(),a.numComplete<5?(d.textContent=a.startText,c.classList.remove("alert-success"),c.classList.add("alert-info")):(d.textContent=a.endText,c.classList.remove("alert-info"),c.classList.add("alert-success"))},resetDraggables:function(){var b,d;for(b=a.draggables.length,d=0;b>d;d+=1)a.draggables[d].element.style.left=a.draggables[d].initialLeft+"px",a.draggables[d].element.style.top=a.draggables[d].initialTop+"px",a.draggables[d].element.addEventListener("mousedown",c.beginDrag,!1);a.numComplete=0,c.updateMessage()},resetDroppables:function(){var b,c;for(b=a.droppables.length,c=0;b>c;c+=1)a.droppables[c].element.classList.remove("hover-target-good"),a.droppables[c].element.classList.remove("hover-target-bad")}};return c.initApp(),c.initDraggable(".logo-dot"),c.initDroppable(".dest-dot"),c}();